<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.1.10-prerelease" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="format-detection" content="telephone=no">
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="static.css">
<title>Transclusion and TextReference: TiddlyWiki/Dev â€” documentation for developers</title>
</head>
<body class="tc-body">
<p><div class="tc-static-alert"><div class="tc-static-alert-inner">This page is part of a static HTML representation of the TiddlyWiki at <a class="tc-tiddlylink-external" href="http://tiddlywiki.com/dev/" target="_blank">http://tiddlywiki.com/dev/</a></div></div>
</p>
<section class="tc-story-river">

<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists   tc-tagged-doc"><div class="tc-tiddler-title">
<div class="tc-titlebar">
<span class="tc-tiddler-controls">
<span class=" tc-reveal"><button aria-label="more" class="tc-btn-invisible" title="More actions">


</button><div class=" tc-reveal" hidden="true"></div></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="edit" class="tc-btn-invisible" title="Edit this tiddler">


</button></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="close" class="tc-btn-invisible" title="Close this tiddler">


</button></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"></span>
</span>

<span>

<span class="tc-tiddler-title-icon" style="fill:;">

</span>



<h2 class="tc-title">
Transclusion and TextReference
</h2>

</span>

</div>

<div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div>
</div><div class=" tc-reveal"><p><div class=" tc-reveal">
<button aria-label="fold tiddler" class="tc-fold-banner" title="Fold the body of this tiddler">

<svg class="tc-image-chevron-up tc-image-button" height="22pt" viewBox="0 0 128 128" width="22pt">
	<g fill-rule="evenodd" transform="translate(64.000000, 89.500000) rotate(-90.000000) translate(-64.000000, -89.500000) translate(-22.500000, 22.500000)">
        <path d="M112.743107,112.12741 C111.310627,113.561013 109.331747,114.449239 107.145951,114.449239 L27.9777917,114.449239 C23.6126002,114.449239 20.0618714,110.904826 20.0618714,106.532572 C20.0618714,102.169214 23.6059497,98.6159054 27.9777917,98.6159054 L99.2285381,98.6159054 L99.2285381,27.365159 C99.2285381,22.9999675 102.77295,19.4492387 107.145205,19.4492387 C111.508562,19.4492387 115.061871,22.993317 115.061871,27.365159 L115.061871,106.533318 C115.061871,108.71579 114.175869,110.694669 112.743378,112.127981 Z" transform="translate(67.561871, 66.949239) rotate(-45.000000) translate(-67.561871, -66.949239) "></path>
        <path d="M151.35638,112.12741 C149.923899,113.561013 147.94502,114.449239 145.759224,114.449239 L66.5910645,114.449239 C62.225873,114.449239 58.6751442,110.904826 58.6751442,106.532572 C58.6751442,102.169214 62.2192225,98.6159054 66.5910645,98.6159054 L137.841811,98.6159054 L137.841811,27.365159 C137.841811,22.9999675 141.386223,19.4492387 145.758478,19.4492387 C150.121835,19.4492387 153.675144,22.993317 153.675144,27.365159 L153.675144,106.533318 C153.675144,108.71579 152.789142,110.694669 151.356651,112.127981 Z" transform="translate(106.175144, 66.949239) rotate(-45.000000) translate(-106.175144, -66.949239) "></path>
	</g>
</svg>
</button>
</div></p><p><div class=" tc-reveal" hidden="true"></div></p></div>
<div class=" tc-reveal">
<div class="tc-subtitle">
<a class="tc-tiddlylink tc-tiddlylink-missing" href=".html">

</a> 14 months ago
</div>
</div>
<div class=" tc-reveal">
<div class="tc-tags-wrapper"><span class="tc-tag-list-item">


<button class="tc-btn-invisible tc-tag-label" style="background-color:;
fill:#4e432f;
color:#4e432f;">
 doc
</button>
<span class=" tc-reveal" hidden="true"></span>


</span>
</div>
</div>
<div class="tc-tiddler-body tc-reveal"><p>The previous parts about <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Widgets.html">Widgets</a> and the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Parser.html">Parser</a> explained how a block of <a class="tc-tiddlylink tc-tiddlylink-resolves" href="WikiText.html">WikiText</a> is transformed into a DOM representation and how this presentation can react on changes to the wiki store.
The previous chapters also describe that <a class="tc-tiddlylink tc-tiddlylink-resolves" href="WikiText.html">WikiText</a> is saved in individual tiddlers, including the <a class="tc-tiddlylink tc-tiddlylink-resolves" href="WikiText.html">WikiText</a> describing the UI components.
This raises the question, how these multiple tiddlers are build up to a single UI.
But before answering this question we need to introduce text references and transclusion.</p><h3 class="">TextReference</h3><p>A text reference describes a special notation to indirectly refer to the contents of a specified tiddler field.
The syntax of a text reference is:</p><pre><code>&lt;tiddlertitle&gt;
&lt;tiddlertitle&gt;!!&lt;fieldname&gt;
!!&lt;fieldname&gt; - specifies a field of the current tiddlers</code></pre><p>To obtain the actual text, the core plug-in adds a function to the wiki store <code>getTextReference(textRef,defaultText,currTiddlerTitle)</code>. The &quot;currentTiddlerTitle&quot; is the title of a tiddler which is used when no tiddlerTitle is specified in the text reference.
What the currentTiddler should be, depends on where the text reference is used.
If it is for example used as a widget attribute, the current tiddler is the tiddler which contains this widget.
Text references are used by widgets (attributes), filteroperators (parameter) and in transclusions.
These elements use the <code>getTextReference(textRef,defaultText,currTiddlerTitle)</code> function.</p><h3 class="">Transclusion</h3><p>Transclusion means including the contents of a different tiddler.
This is realized with a transclude widget which parses the tiddler to be included and adds the resulting nodes as children of its own parse node.
The trick with transclusion is, that it shows the content of a different tiddler but by default it does not change the current tiddler.
This enables us to create tiddlers with text references and use them as a templates.</p><p>For example:
Tiddler <code>MyTask</code> having the fields and the content of:</p><pre><code>important: &quot;very&quot;
assoc.person: &quot;Hans Dampf&quot;

&lt;$transclude tiddler=&quot;TaskHeaderTemplate&quot; /&gt;

Hans needs some more Dampf.</code></pre><p>And Tiddler <code>TaskHeaderTemplate</code> with a content of:</p><pre><code>&lt;$view field=&quot;assoc.person&quot;/&gt; has a &lt;$view field=&quot;important&quot;/&gt; important task for us:</code></pre><p>When showing tiddler <code>MyTask</code> it would result in:</p><pre><code>Hans Dampf has a very important task for us:

Hans needs some more Dampf.</code></pre><p>Transclusion and templates is one of the most important concepts in <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TiddlyWiki.html">TiddlyWiki</a>.
It allows us to include other tiddlers using the metadata for our current tiddler.
It also allows us to transclude a template tiddler with a third tiddler set as the currentTiddler with the TiddlerWidget:</p><pre><code>&lt;$tiddler tiddler=&quot;MyTiddler&quot;&gt;
&lt;$transclude tiddler=&quot;EditTemplate&quot; /&gt;
&lt;/$tiddler&gt;</code></pre><p>This way we can create a different view on a tiddler which does not only show it's title and it's content
but shows it's content and metadata in editable text fields and allows us to edit this tiddler.
Also the template concept is used by the ListWidget to show the tiddlers through a specified template.
Finally, when wanting to download the wiki as a new html file, this html file is created by binding a list of all tiddlers to a template and sending the resulting text to the syncer module described in <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Extended%2520Persistence.html">Extended Persistence</a> to save the current wiki.
</p></div>



</div>

</p>

</section>
</body>
</html>
